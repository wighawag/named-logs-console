!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","named-logs"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hookup=t.replaceConsole=t.factory=void 0;const r=e("named-logs"),o=()=>{},n="undefined"!=typeof window?window:globalThis,l=n.console,a=[],c=[];function s(e,r,n,a){return r.enabled&&(r.level>=a||t.factory.level>=a)?n<=a||t.factory.traceLevel<=a?l.trace.bind(l):e.bind(l):o}const i={};function f(e){process.stdout.write(e)}t.factory=e=>{let r=i[e];if(r)return r;let o=t.factory.level,n=t.factory.traceLevel;return r=i[e]={get assert(){return s(l.assert,r,n,1)},get error(){return s(l.error,r,n,1)},get warn(){return s(l.warn,r,n,2)},get info(){return s(l.info,r,n,3)},get write(){return"undefined"!=typeof process?s(f,r,n,3):s(l.info,r,n,3)},get log(){return s(l.log,r,n,4)},get debug(){return s(l.debug,r,n,5)},get trace(){return s(l.trace,r,n,6)},get dir(){return s(l.dir,r,n,5)},get table(){return s(l.table||l.debug,r,n,5)},get time(){return s(l.time||l.debug,r,n,5)},get timeEnd(){return s(l.timeEnd||l.debug,r,n,5)},get timeLog(){return s(l.timeLog||l.debug,r,n,5)},get level(){return o},set level(e){o=e},get traceLevel(){return n},set traceLevel(e){n=e},enabled:g(e,{disabledRegexps:a,enabledRegexps:c})}};const d={error:1,warn:2,info:3,log:4,debug:5,trace:6};function g(e,{disabledRegexps:t,enabledRegexps:r}){if("*"===e[e.length-1])return!0;let o,n;for(o=0,n=t.length;o<n;o++)if(t[o].test(e))return!1;for(o=0,n=r.length;o<n;o++)if(r[o].test(e))return!0;return!1}function u(e,{disabledRegexps:t,enabledRegexps:r},o){const n=("string"==typeof e?e:"").split(/[\s,]+/),l=n.length;for(let o=0;o<l;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.push(new RegExp("^"+e.substr(1)+"$")):r.push(new RegExp("^"+e+"$")));for(const e of Object.keys(i))o(e,g(e,{disabledRegexps:t,enabledRegexps:r}))}if(t.factory.level=2,t.factory.traceLevel=6,t.factory.setTraceLevelFor=(e,t)=>{u(e||"*",{disabledRegexps:[],enabledRegexps:[]},((e,r)=>{r&&(i[e].traceLevel=t)}))},t.factory.disable=()=>{a.splice(0,a.length),c.splice(0,c.length);for(const e of Object.keys(i))i[e].enabled=!1;try{localStorage.removeItem("debug")}catch(e){}},t.factory.enable=e=>{a.splice(0,a.length),c.splice(0,c.length),u(e=""===e?"*":e||"*",{disabledRegexps:a,enabledRegexps:c},((e,t)=>i[e].enabled=t));try{localStorage.setItem("debug",e)}catch(e){}},t.replaceConsole=function(e="console"){const r=t.factory(e);return n.console=Object.assign(Object.assign({},r),{clear:l.clear.bind(l),count:o,countReset:o,dirxml:o,exception:o,group:o,groupCollapsed:o,groupEnd:o,timeStamp:o,profile:o,profileEnd:o}),l},t.hookup=function(){r.hook(t.factory)},"undefined"!=typeof localStorage)try{const e=localStorage.getItem("debug");e&&""!==e&&t.factory.enable(e)}catch(e){}else if("undefined"!=typeof process){let e=process.env.NAMED_LOGS;e?t.factory.enable(e):t.factory.disable(),e=process.env.NAMED_LOGS_LEVEL,e&&(t.factory.level=d[e]||parseInt(e)||t.factory.level),e=process.env.NAMED_LOGS_TRACE_LEVEL,e&&(t.factory.traceLevel=d[e]||parseInt(e)||t.factory.level)}const p=n.location?n.location.search.slice(1).split("&"):[];for(const e of p)if(e.startsWith("debug=")){const r=e.slice(6);""===r?t.factory.disable():t.factory.enable(r)}else if(e.startsWith("log=")){const r=e.slice(4);t.factory.level=d[r]||parseInt(r)||t.factory.level}else if(e.startsWith("trace=")){const r=e.slice(6);t.factory.traceLevel=d[r]||parseInt(r)||t.factory.level}"undefined"!=typeof window?window._logFactory=t.factory:"undefined"!=typeof global&&(global._logFactory=t.factory)}));